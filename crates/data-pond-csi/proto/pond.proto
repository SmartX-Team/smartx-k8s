syntax="proto3";
package io.ulagbulag.csi.pond.v1;

service Pond {
  rpc ListDevices (ListDevicesRequest)
    returns (ListDevicesResponse) {}
}

message ListDevicesRequest {}

message ListDevicesResponse {
  repeated Device devices = 1;
  DeviceTopology topology = 2;
}

message Device {
  string id = 1;
  optional string uid = 2;
  DeviceLayer.Type layer = 3;
  DeviceSource.Type source = 4;
  optional string addr = 5;
  int64 capacity = 6;
}

message DeviceLayer {
  enum Type {
    UNKNOWN = 0;
    LVM = 1;
  }
}

message DeviceSource {
  enum Type {
    UNKNOWN = 0;
    NVME = 1;
  }
}

message DeviceTopology {
  map<string, string> required = 1;
  map<string, string> provides = 2;
}
